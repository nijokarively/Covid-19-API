{"version":3,"sources":["src/app/regions/regions.page.html","src/app/regions/regions.module.ts","src/app/regions/regions.page.scss","src/app/regions/regions.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button [text]=\\\"'Countries'\\\" [icon]=\\\"buttonIcon\\\">\\n      </ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      COVID-19 by Region\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-toolbar>\\n  <ion-searchbar [(ngModel)]=\\\"searchRegion\\\" autocomplete=\\\"off\\\"></ion-searchbar>\\n</ion-toolbar>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-list *ngFor=\\\"let region of regions | filter:searchRegion\\\">\\n    <ion-card lines=\\\"none\\\" class=\\\"ion-no-padding\\\">\\n      <ion-card-header>\\n        <ion-card-title>\\n          {{region.region}}\\n        </ion-card-title>\\n      </ion-card-header>\\n      <ion-card-content>\\n        <p>\\n          Cases: {{region.cases | number}}</p>\\n        <p *ngIf=\\\"region.deaths\\\">\\n          Deaths: {{region.deaths | number}}\\n        </p>\\n      </ion-card-content>\\n    </ion-card>\\n  </ion-list>\\n</ion-content>\"","\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Ng2SearchPipeModule } from 'ng2-search-filter';\nimport { RegionsPage } from './regions.page';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Ng2SearchPipeModule,\n    RouterModule.forChild([{ path: '', component: RegionsPage }])\n  ],\n  declarations: [RegionsPage]\n})\nexport class RegionsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlZ2lvbnMvcmVnaW9ucy5wYWdlLnNjc3MifQ== */\"","import { Component } from '@angular/core';\nimport { ToastController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription, interval } from 'rxjs';\nimport { CovidService } from '../covid.service';\n\n@Component({\n  selector: 'app-regions',\n  templateUrl: './regions.page.html',\n  styleUrls: ['./regions.page.scss'],\n})\nexport class RegionsPage {\n\n  regions: any = null;\n  searchRegion: any;\n\n  private sub: Subscription;\n  private countryCode = '';\n\n  constructor(private route: ActivatedRoute, private covidService: CovidService, public toastController: ToastController, private storage: Storage) { }\n\n  async refreshingToast() {\n    console.log('Refreshing...');\n    const toast = await this.toastController.create({\n      message: 'Refreshing...',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  createSubscription() {\n    this.sub = interval(300000).subscribe((val) => {\n      this.refreshingToast();\n      this.getData();\n    });\n  }\n\n  deleteSubscription() {\n    this.sub.unsubscribe();\n  }\n\n  getData() {\n    this.covidService.getRegions(this.countryCode).subscribe((data) => {\n      if (data) {\n        this.regions = data;\n        this.storage.set(this.countryCode, data);\n      } else {\n        this.storage.get(this.countryCode).then((val) => {\n          this.regions = val;\n        });\n      }\n    });\n  }\n\n  ionViewWillEnter() {\n    this.countryCode = this.route.snapshot.paramMap.get('id');\n    this.getData();\n    this.createSubscription();\n  }\n\n  ionViewDidLeave() {\n    this.deleteSubscription();\n  }\n\n  doRefresh(event) {\n    this.refreshingToast();\n    this.getData();\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      event.target.complete();\n    }, 2000);\n  }\n}\n"],"sourceRoot":"webpack:///","file":"regions-regions-module-es5.js"}